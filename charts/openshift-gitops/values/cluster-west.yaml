# Cluster-Specific Overrides - West Region
# Egypt Production Cluster

# Cluster metadata
labels:
  cluster: prod-west
  region: egypt-cairo
  datacenter: dc2

annotations:
  cluster-name: "prod-west-cairo"
  region: "egypt-cairo"
  contact: "platform-cairo@emiratesnbd.com"

# Region-specific repositories
argocd:
  repositories:
    - url: https://github.com/emiratesnbd/prod-gitops-west
      name: prod-gitops-west
      type: git
    - url: https://github.com/emiratesnbd/helm-charts-west
      name: internal-charts-west
      type: helm
  
  # Regional cluster configurations
  clusters:
    - name: prod-west-cairo
      server: https://api.prod-west.emiratesnbd.local:6443
      config:
        tlsClientConfig:
          insecure: false
          caData: ""  # Add CA certificate
    - name: prod-west-alexandria
      server: https://api.prod-west-alex.emiratesnbd.local:6443
      config:
        tlsClientConfig:
          insecure: false
  
  # Regional projects
  projects:
    - name: egypt-applications
      description: Egypt Regional Applications
      sourceRepos:
        - 'https://github.com/emiratesnbd/egypt-*'
      destinations:
        - namespace: 'egypt-*'
          server: https://api.prod-west.emiratesnbd.local:6443
        - namespace: 'egypt-*'
          server: https://api.prod-west-alex.emiratesnbd.local:6443
      clusterResourceWhitelist:
        - group: ''
          kind: Namespace
  
  # Regional banner
  banner:
    enabled: true
    content: "üåç EGYPT REGION - Cairo Production Cluster"
    url: ""

# Node selector for west region
nodeSelector:
  topology.kubernetes.io/region: egypt-cairo
  node-role.kubernetes.io/infra: ""

# Tolerations
tolerations:
  - key: "region"
    operator: "Equal"
    value: "egypt-cairo"
    effect: "NoSchedule"

# Affinity for regional pod placement
affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
        - matchExpressions:
            - key: topology.kubernetes.io/region
              operator: In
              values:
                - egypt-cairo
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchExpressions:
              - key: app.kubernetes.io/name
                operator: In
                values:
                  - openshift-gitops
          topologyKey: topology.kubernetes.io/zone
